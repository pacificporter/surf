box:
  id: pacificporter/golang:1.16.4-14.15.4-2
  username: $DOCKER_HUB_USERNAME
  password: $DOCKER_HUB_PASSWORD
build:
  steps:
    - script:
        name: install linter
        code: |
          curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin v1.30.0
    - script:
        name: lint check
        cwd: $WERCKER_SOURCE_DIR
        code: |
          golangci-lint run
    - script:
        name: go vet
        cwd: $WERCKER_SOURCE_DIR
        code: |
          go vet ./...
    - script:
        name: go test
        cwd: $WERCKER_SOURCE_DIR
        code: |
          TZ=Japan go test ./...
